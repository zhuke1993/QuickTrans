# 翻译页面功能测试指南

## 安装和加载插件

1. 打开Chrome浏览器
2. 访问 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"重新加载"按钮（如果已经加载了插件）或"加载已解压的扩展程序"选择QuickTrans目录

## 测试清单

### 1. Popup菜单测试

**测试步骤：**
- 点击浏览器工具栏中的QuickTrans图标
- 验证popup菜单正常显示
- 点击"翻译页面"按钮，验证能打开translator.html页面
- 点击"设置"按钮，验证能打开options.html页面

**预期结果：**
- ✅ Popup菜单样式美观，显示正常
- ✅ 点击按钮能正确跳转到对应页面

---

### 2. 剪贴板读取测试

**测试步骤：**
1. 复制一段文本到剪贴板（如："Hello World"）
2. 通过以下任一方式打开翻译页面：
   - 点击插件图标 → 点击"翻译页面"
   - 使用快捷键 Ctrl+Shift+T (Mac: Command+Shift+T)
3. 观察输入框内容

**预期结果：**
- ✅ 输入框自动填充剪贴板内容
- ✅ 字符计数正确显示
- ✅ 如果剪贴板为空或读取失败，输入框保持空白（不报错）

---

### 3. 手动输入翻译测试

**测试步骤：**
1. 打开翻译页面
2. 在输入框中输入一段英文："The quick brown fox jumps over the lazy dog"
3. 选择目标语言为"中文"
4. 点击"翻译"按钮

**预期结果：**
- ✅ 显示加载动画
- ✅ 翻译结果流式显示（逐字出现）
- ✅ 翻译完成后显示完整结果
- ✅ 复制和重试按钮变为可用状态
- ✅ 字符计数实时更新

---

### 4. 粘贴按钮测试

**测试步骤：**
1. 复制一段新文本到剪贴板
2. 在翻译页面点击"📋 粘贴"按钮
3. 验证输入框内容更新

**预期结果：**
- ✅ 输入框内容被替换为新的剪贴板内容
- ✅ 字符计数更新

---

### 5. 清空按钮测试

**测试步骤：**
1. 在输入框中输入一些文本
2. 点击"🗑️ 清空"按钮

**预期结果：**
- ✅ 输入框清空
- ✅ 结果区域重置为默认状态
- ✅ 复制和重试按钮禁用
- ✅ 字符计数归零

---

### 6. 复制译文测试

**测试步骤：**
1. 完成一次翻译
2. 点击"📄 复制"按钮
3. 在其他地方粘贴验证

**预期结果：**
- ✅ 翻译结果成功复制到剪贴板
- ✅ 按钮短暂显示"✓ 已复制"反馈
- ✅ 按钮颜色变为绿色，2秒后恢复

---

### 7. 重新翻译测试

**测试步骤：**
1. 完成一次翻译
2. 点击"🔄 重试"按钮

**预期结果：**
- ✅ 使用相同的文本和语言重新执行翻译
- ✅ 流程与首次翻译一致

---

### 8. 语言切换测试

**测试步骤：**
1. 输入一段英文文本
2. 先翻译成中文
3. 切换目标语言为"日语"
4. 观察是否自动保存偏好

**预期结果：**
- ✅ 目标语言切换后立即保存到用户偏好
- ✅ 下次打开页面时默认选中上次的目标语言

---

### 9. 划词词典查询测试

**测试步骤：**
1. 在输入框中输入一段包含英文单词的文本：
   ```
   The word "serendipity" means finding something good without looking for it.
   ```
2. 在输入框中用鼠标选中单词 "serendipity"
3. 等待词典弹窗出现

**预期结果：**
- ✅ 弹出词典查询窗口
- ✅ 显示单词、音标（如有）
- ✅ 显示上下文句子并高亮单词
- ✅ 流式显示词典释义
- ✅ 显示句子翻译
- ✅ 可以复制释义

**注意事项：**
- 只有单个英文单词才会触发词典查询
- 选中多个单词、中文或数字不会触发

---

### 10. 词典弹窗关闭测试

**测试步骤：**
1. 触发词典弹窗
2. 尝试以下关闭方式：
   - 点击弹窗右上角的 × 按钮
   - 点击弹窗外的任意区域
   - 按 ESC 键

**预期结果：**
- ✅ 所有方式都能正确关闭弹窗
- ✅ 弹窗关闭后不影响其他功能

---

### 11. 快捷键测试

**测试步骤：**
1. 在任意网页上按 Ctrl+Shift+T (Mac: Command+Shift+T)
2. 验证翻译页面打开

**预期结果：**
- ✅ 快捷键能正确打开翻译页面
- ✅ 新标签页打开

---

### 12. 右键菜单 - 划词翻译测试

**测试步骤：**
1. 在任意网页上选中一段文本
2. 右键点击
3. 选择"🌐 翻译选中文本"

**预期结果：**
- ✅ 在当前页面弹出翻译窗口
- ✅ 显示选中文本的翻译结果

---

### 13. 右键菜单 - 在翻译页面中打开测试

**测试步骤：**
1. 在任意网页上选中一段文本
2. 右键点击
3. 选择"📝 在翻译页面中打开"

**预期结果：**
- ✅ 在新标签页打开翻译页面
- ✅ 选中的文本自动填充到输入框
- ✅ 可以继续编辑和翻译

---

### 14. 错误处理测试

#### 14.1 未配置API测试

**测试步骤：**
1. 清除所有API配置
2. 尝试翻译一段文本

**预期结果：**
- ✅ 显示友好的错误提示："尚未配置翻译API"
- ✅ 提供"前往设置"按钮

#### 14.2 文本过长警告测试

**测试步骤：**
1. 输入超过maxTextLength限制的文本（默认5000字符）
2. 观察提示

**预期结果：**
- ✅ 字符计数显示为红色并标注"超出限制"
- ✅ 仍然允许用户继续操作（不强制阻止）

---

### 15. 响应式布局测试

**测试步骤：**
1. 调整浏览器窗口大小
2. 测试以下尺寸：
   - 大屏（> 1200px）
   - 中屏（768px - 1200px）
   - 小屏（< 768px）

**预期结果：**
- ✅ 大屏：输入和结果左右分布
- ✅ 中屏：上下分栏
- ✅ 小屏：垂直紧凑布局
- ✅ 所有尺寸下界面都美观可用

---

### 16. 流式输出测试

**测试步骤：**
1. 输入一段较长的文本（200字以上）
2. 执行翻译
3. 观察结果显示过程

**预期结果：**
- ✅ 翻译结果逐字逐句出现（流式输出）
- ✅ 不是等待全部完成后一次性显示
- ✅ 用户体验流畅

---

### 17. 缓存功能测试

**测试步骤：**
1. 翻译一段文本（如："Hello World"）
2. 记录翻译时间
3. 清空输入框，重新输入相同文本
4. 再次翻译相同文本和目标语言

**预期结果：**
- ✅ 第二次翻译几乎瞬间完成（使用缓存）
- ✅ 结果区域显示"(缓存结果)"提示

---

### 18. Ctrl/Cmd+Enter快捷键测试

**测试步骤：**
1. 在输入框中输入文本
2. 按 Ctrl+Enter (Mac: Cmd+Enter)

**预期结果：**
- ✅ 直接触发翻译，无需点击按钮
- ✅ 翻译流程正常执行

---

## 常见问题排查

### 问题1：剪贴板读取失败
**原因：** 浏览器未授予剪贴板权限  
**解决：** 检查manifest.json中是否有"clipboardRead"权限，在浏览器设置中允许该权限

### 问题2：翻译失败提示"未配置API"
**原因：** 没有配置翻译API  
**解决：** 点击插件图标 → 设置 → 添加翻译API配置

### 问题3：词典查询不显示
**原因：** 选中的不是单个英文单词  
**解决：** 确保只选中一个英文单词（不包含空格、标点）

### 问题4：快捷键不生效
**原因：** 快捷键冲突或浏览器版本问题  
**解决：** 在 chrome://extensions/shortcuts 中检查和修改快捷键设置

### 问题5：右键菜单不显示
**原因：** 插件未正确加载或权限不足  
**解决：** 重新加载插件，检查manifest.json中的"contextMenus"权限

---

## 性能测试

### 大文本翻译测试
- 输入5000字符的文本
- 观察翻译速度和流式输出效果
- 检查是否有卡顿或崩溃

### 连续操作测试
- 连续翻译10次不同的文本
- 观察内存占用是否正常
- 检查是否有内存泄漏

### 词典查询频繁测试
- 在输入框中连续选中不同单词10次
- 观察弹窗响应速度
- 检查是否有性能问题

---

## 测试完成标准

所有测试项目的"预期结果"都应该显示 ✅

如果发现任何问题，请记录：
1. 问题描述
2. 复现步骤
3. 预期行为
4. 实际行为
5. 浏览器版本和操作系统

---

**测试完成后，请将结果反馈给开发团队！**
